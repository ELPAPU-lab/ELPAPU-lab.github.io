<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>PAPU Speedruns</title>
<style>
/* tu CSS original (no cambi칩) */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
body{background:black;color:white;margin:0;font-family:'Press Start 2P', monospace;overflow-x:hidden;position:relative;}
body::before{content:"";position:fixed;top:0;left:0;width:200%;height:200%;background-image:repeating-linear-gradient(45deg,#222 0 1px,#111 1px 2px);z-index:-1;animation:bgMove 20s linear infinite;}
@keyframes bgMove{0%{transform:translate(0,0);}50%{transform:translate(-50px,50px);}100%{transform:translate(0,0);}}
/* ... resto del CSS original ... */
</style>
</head>
<body>

<!-- Paneles, tablas y men칰s (igual que tu c칩digo) -->
<!-- ... tu HTML original ... -->

<script>
/* -------------------- LOGROS -------------------- */
const LOGROS = {
  primerRun: { nombre: "Primer Run", unlocked: false },
  sub30: { nombre: "Sub 30", unlocked: false },
  sub20: { nombre: "Sub 20", unlocked: false },
  sub19: { nombre: "Sub 19", unlocked: false },
  grinder: { nombre: "GRANDE DIEGO", unlocked: false },
  secreto: { nombre: "???", unlocked: false },
  pacfan: { nombre: "Pac-Fan", unlocked: false },
  speedrunner: { nombre: "Speedrunner", unlocked: false }
};

function loadLogros(){
  const saved = JSON.parse(localStorage.getItem("papuLogros"));
  if(saved){
    for(const key in LOGROS){
      if(saved[key] !== undefined) LOGROS[key].unlocked = saved[key];
    }
  }
}
function saveLogros(){
  const data = {};
  for(const key in LOGROS) data[key] = LOGROS[key].unlocked;
  localStorage.setItem("papuLogros", JSON.stringify(data));
}
function showLogros(){
  hideAll();
  menuPanel.style.display="none";
  const list = document.getElementById("logrosList");
  list.innerHTML="";
  for(const key in LOGROS){
    const btn = document.createElement("button");
    btn.innerText = LOGROS[key].unlocked ? LOGROS[key].nombre : "-----------";
    btn.onclick = ()=>showLogroInfo(key);
    list.appendChild(btn);
  }
  document.getElementById("logrosPanel").style.display="block";
}
function showLogroInfo(key){
  const infoPanel = document.getElementById("logroInfoPanel");
  document.getElementById("infoTitle").innerText = LOGROS[key].nombre;
  const descs = {
    primerRun: "Haz tu primer run en cualquier categor칤a.",
    sub30: "Completa un run en 30-20 segundos.",
    sub20: "Completa un run en 19,99-18,30 segundos.",
    sub19: "Completa un run en menos de 19 segundos.",
    grinder: "Agrega 10 runs en cualquier categor칤a.",
    secreto: "Consigue al menos un run en todas las categor칤as.",
    pacfan: "Completa un run con el nombre 'Pacman'.",
    speedrunner: "En 1-1 Level logra un tiempo entre 19-18 segundos y en Any% un tiempo menor a 5 minutos."
  };
  document.getElementById("infoDesc").innerText = descs[key] || "Sin descripci칩n disponible";
  infoPanel.style.display="block";
}

/* -------------------- SPEEDRUNS -------------------- */
function addSpeedrun(){
  const pass=document.getElementById('importPass').value;
  if(pass!=="ELPAPUESPRO"){ alert("Contrase침a incorrecta"); return; }
  const name=document.getElementById('playerName').value.trim();
  const time=parseFloat(document.getElementById('playerTime').value);
  const video=document.getElementById('playerVideo').value.trim();
  const category=document.getElementById('runCategory').value;
  if(!name||isNaN(time)){ alert("Completa todos los campos correctamente"); return; }

  const table=document.getElementById(category);
  const row=document.createElement('tr');
  row.innerHTML=`<td></td><td>${name}</td><td>${time.toFixed(2)}</td><td>Custom</td><td>${video ? `<a href="${video}" target="_blank">VER</a>` : '--'}</td>`;
  table.appendChild(row);
  sortTable(table);
  saveRuns();

  checkLogros(time, category, name); // <-- ahora pasa el nombre

  // Limpiar campos
  document.getElementById('playerName').value="";
  document.getElementById('playerTime').value="";
  document.getElementById('playerVideo').value="";
  document.getElementById('importPass').value="";
  document.getElementById('importPanel').style.display="none";
}

function checkLogros(time, category, playerName){
  unlock('primerRun');

  if(time>=20 && time<=30) unlock('sub30');
  if(time>=18.3 && time<=19.99) unlock('sub20');
  if(time<19) unlock('sub19');

  const totalRuns=[...document.querySelectorAll("table")].reduce((acc,t)=>acc+t.rows.length-1,0);
  if(totalRuns>=10) unlock('grinder');

  const lvl11Best=[...document.getElementById('lvl11').rows].slice(1).map(r=>parseFloat(r.cells[2].innerText)).sort((a,b)=>a-b)[0] || Infinity;
  const anyBest=[...document.getElementById('any').rows].slice(1).map(r=>parseFloat(r.cells[2].innerText)).sort((a,b)=>a-b)[0] || Infinity;
  if(lvl11Best>=18 && lvl11Best<=19 && anyBest<300) unlock('speedrunner');

  // PAC-FAN
  if(playerName.toLowerCase().includes("pacman")) unlock('pacfan');

  // ??? secreto: al menos un run en cada categor칤a
  const categorias=['lvl11','any','warpless','moon11','moonAny'];
  if(categorias.every(c => document.getElementById(c).rows.length>1)) unlock('secreto');

  saveLogros();
}

function unlock(id){
  if(!LOGROS[id].unlocked){
    LOGROS[id].unlocked=true;
    alert("游끥 LOGRO DESBLOQUEADO: "+LOGROS[id].nombre);
  }
}
</script>

<!-- resto del JS original de tu p치gina (mini player, men칰, etc.) sin cambios -->

<script>
window.onload = ()=>{
  loadRuns();
  loadLogros();
  showCategory('lvl11');
}
</script>
</body>
</html>
